# Прогнозирование оттока клиентов в сети отелей "Как в гостях".

Заказчик этого исследования — сеть отелей «Как в гостях». 

Чтобы привлечь клиентов, эта сеть отелей добавила на свой сайт возможность забронировать номер без предоплаты. Однако если клиент отменял бронирование, то компания терпела убытки. Сотрудники отеля могли, например, закупить продукты к приезду гостя или просто не успеть найти другого клиента.

Бизнес-метрика и другие данные.

Основная бизнес-метрика для любой сети отелей — её прибыль. Прибыль отеля — это разница между стоимостью номера за все ночи и затраты на обслуживание: как при подготовке номера, так и при проживании постояльца. 
В отеле есть несколько типов номеров. В зависимости от типа номера назначается стоимость за одну ночь. Есть также затраты на уборку. Если клиент снял номер надолго, то убираются каждые два дня. 

Стоимость номеров отеля:
- категория A: за ночь — 1 000, разовое обслуживание — 400;
- категория B: за ночь — 800, разовое обслуживание — 350;
- категория C: за ночь — 600, разовое обслуживание — 350;
- категория D: за ночь — 550, разовое обслуживание — 150;
- категория E: за ночь — 500, разовое обслуживание — 150;
- категория F: за ночь — 450, разовое обслуживание — 150;
- категория G: за ночь — 350, разовое обслуживание — 150.

В ценовой политике отеля используются сезонные коэффициенты: весной и осенью цены повышаются на 20%, летом — на 40%.
Убытки отеля в случае отмены брони номера — это стоимость одной уборки и одной ночи с учётом сезонного коэффициента.
На разработку системы прогнозирования заложен бюджет — 400 000. При этом необходимо учесть, что внедрение модели должно окупиться за тестовый период. Затраты на разработку должны быть меньше той выручки, которую система принесёт компании.

Описание данных.
В таблицах hotel_train и hotel_test содержатся одинаковые столбцы:
- id — номер записи;
- adults — количество взрослых постояльцев;
- arrival_date_year — год заезда;
- arrival_date_month — месяц заезда;
- arrival_date_week_number — неделя заезда;
- arrival_date_day_of_month — день заезда;
- babies — количество младенцев;
- booking_changes — количество изменений параметров заказа;
- children — количество детей от 3 до 14 лет;
- country — гражданство постояльца;
- customer_type — тип заказчика:
- Contract — договор с юридическим лицом;
- Group — групповой заезд;
- Transient — не связано с договором или групповым заездом;
- Transient-party — не связано с договором или групповым заездом, но связано с бронированием типа Transient.
- days_in_waiting_list — сколько дней заказ ожидал подтверждения;
- distribution_channel — канал дистрибуции заказа;
- is_canceled — отмена заказа;
- is_repeated_guest — признак того, что гость бронирует номер второй раз;
- lead_time — количество дней между датой бронирования и датой прибытия;
- meal — опции заказа:
  - SC — нет дополнительных опций;
  - BB — включён завтрак;
  - HB — включён завтрак и обед;
  - FB — включён завтрак, обед и ужин.
- previous_bookings_not_canceled — количество подтверждённых заказов у клиента;
- previous_cancellations — количество отменённых заказов у клиента;
- required_car_parking_spaces — необходимость места для автомобиля;
- reserved_room_type — тип забронированной комнаты;
- stays_in_weekend_nights — количество ночей в выходные дни;
- stays_in_week_nights — количество ночей в будние дни;
- total_nights — общее количество ночей;
- total_of_special_requests — количество специальных отметок.

## Цель исследования:

Необходимо разработать систему, которая предсказывает отказ от брони. Если модель покажет, что бронь будет отменена, то клиенту предлагается внести депозит. Размер депозита — 80% от стоимости номера за одни сутки и затрат на разовую уборку. Деньги будут списаны со счёта клиента, если он всё же отменит бронь.

## Ход исследования:

Шаг 1. Прочитаны и проанализированы файлы с данными для обучения и тестирования модели

Шаг 2. Предобработка и исследовательский анализ данных
Проверка данных и их корректировка.
Проведен исследовательский анализ представленных данных с описанием найденных особенностей: пропуски, выбросы.

Шаг 3. Вычисление бизнес-метрики
Произведена оценка прибыли отеля без внедрения депозитов.

Шаг 4. Разработка модели ML
Обучение разных моделей с оценкой их качества кросс-валидацией. Выбрана лучшую модель и проверена на тестовой выборке с описанием выводов.
Выбрана метрика для обучения.
Выполнена оценка прибыли, которую принесёт выбранная модель за год.

Шаг 5. Выявление признаков «ненадёжного» клиента
На основе исследовательского анализа данных описан клиент, склонный к отказу от брони.

Шаг 6. Общий вывод
Описана модель, которая решает задачу с наибольшей выгодой для бизнеса. Выданы рекомендации по результатам проделанной работы.

## Итог исследования:

Мы обработали два датафрейма сети отелей "Как в гостях", чтобы оценить, какую дополнительную прибыль гостиницы могли бы получить с клиентов, любящих в последний момент отменить свою бронь (а отменяется каждое третье бронирование, даже чуть больше, 36,9%).

Нами был проведен исследовательский анализ данных, чтобы составить портрет ненадёжного клиента, который чаще других отменяет бронирования.
Ненадежный клиент :
- бронирует номер очень заранее
- бронирует номер на сезон отпусков, пасхальные или рождественские каникулы (туристы в отпуск ненадежнее путешествующих круглый год)
- бронирует на 2, 6 или 9 ночей (особенно если на 2 будних дня)
- бронирует номер на 2 взрослых без детей
- бронирует номер типа A
- бронирует полный пансион (редкая пташка)
- новый клиент или клиент, ранее много раз уже отменявший бронь
- клиент турагенства / клиент по договору от юрлица
  
Мы подсчитали текущую прибыль отеля с потерями от отмен и предлагаем ввести систему депозитов для "ненадежных" клиентов. На исторических данных использование данной системы позволило бы увеличить прибыль с 32,5 до почти 65 миллионов у.е. 

Мы построили и обучили модель машинного обучения, которая показывает точность в 70%, соответственно, при ее использовании в будущем мы могли бы увеличить прибыль отеля с 32,5 до 55,3  млн у.е., то есть введение нашей модели в работу системы бронирования с депозитами при отмене может принести отелям дополнительные 23 млн у.е. прибыли.

## Стек технологий:

`pandas`, `matplotlib`, `numpy`, `scikit-learn`, `math`
